<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Simulation Paradox | Physics-Preserved Learning</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
            overflow-x: hidden;
        }
        h1, h2, h3 {
            letter-spacing: -0.025em;
        }
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .gradient-text {
            background: linear-gradient(to right, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        canvas {
            touch-action: none;
        }
        .glow {
            box-shadow: 0 0 20px rgba(96, 165, 250, 0.2);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS (Inline SVGs to prevent dependency errors) ---
        const Clock = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const Zap = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        const ShieldCheck = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                <path d="m9 12 2 2 4-4"></path>
            </svg>
        );

        const Database = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                <path d="M3 5v14c0 1.66 4 3 9 3s 9-1.34 9-3V5"></path>
            </svg>
        );

        const AlertTriangle = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        );

        const ArrowRight = (props) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        );


        // --- PARTICLE SYSTEM LOGIC ---
        const CANVAS_WIDTH = 600;
        const CANVAS_HEIGHT = 400;
        const PARTICLE_COUNT = 150;
        const GRAVITY = 0.15;
        const DAMPING = 0.98; // Energy loss on bounce

        const SimulationCanvas = ({ mode }) => {
            const canvasRef = useRef(null);
            const requestRef = useRef(null);
            const particles = useRef([]);
            const frameCount = useRef(0);

            // Initialize Particles
            const initParticles = () => {
                const newParticles = [];
                for (let i = 0; i < PARTICLE_COUNT; i++) {
                    newParticles.push({
                        x: Math.random() * CANVAS_WIDTH,
                        y: Math.random() * (CANVAS_HEIGHT / 2), // Start top half
                        vx: (Math.random() - 0.5) * 4,
                        vy: (Math.random() - 0.5) * 4,
                        radius: 4 + Math.random() * 3,
                        color: mode === 'traditional' ? '#60a5fa' : (mode === 'ai' ? '#f87171' : '#34d399')
                    });
                }
                particles.current = newParticles;
            };

            useEffect(() => {
                initParticles();
            }, [mode]);

            const updateParticles = () => {
                if (!canvasRef.current) return;
                const ctx = canvasRef.current.getContext('2d');
                ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
                
                // Draw Container
                ctx.strokeStyle = '#334155';
                ctx.lineWidth = 2;
                ctx.strokeRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);

                // Determine Logic based on Mode
                let speedMultiplier = 1;
                let isPaused = false;
                
                if (mode === 'traditional') {
                    // SLOW: Only update every 10th frame to simulate calculation time
                    if (frameCount.current % 10 !== 0) isPaused = true;
                }
                
                if (!isPaused) {
                    particles.current.forEach(p => {
                        // Standard Physics
                        p.vy += GRAVITY;
                        p.x += p.vx * speedMultiplier;
                        p.y += p.vy * speedMultiplier;

                        // AI HALLUCINATION LOGIC
                        if (mode === 'ai') {
                            // Randomly add energy (Momentum violation)
                            if (Math.random() < 0.05) {
                                p.vx *= 1.1; 
                                p.vy *= 1.1;
                            }
                            // Random jitter
                            p.x += (Math.random() - 0.5) * 2;
                        }

                        // BOUNDARY CHECK
                        if (p.y + p.radius > CANVAS_HEIGHT) {
                            p.y = CANVAS_HEIGHT - p.radius;
                            p.vy *= -DAMPING; 
                        }
                        if (p.x + p.radius > CANVAS_WIDTH) {
                            p.x = CANVAS_WIDTH - p.radius;
                            p.vx *= -DAMPING;
                        }
                        if (p.x - p.radius < 0) {
                            p.x = p.radius;
                            p.vx *= -DAMPING;
                        }
                        if (p.y - p.radius < 0) {
                            p.y = p.radius;
                            p.vy *= -DAMPING;
                        }

                        // Draw Particle
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                        ctx.fillStyle = p.color;
                        ctx.fill();
                    });
                }

                // UI Overlay for Traditional
                if (mode === 'traditional' && isPaused) {
                    ctx.fillStyle = 'rgba(15, 23, 42, 0.3)';
                    ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
                    ctx.fillStyle = '#ffffff';
                    ctx.font = '14px JetBrains Mono';
                    ctx.fillText("Calculating Navier-Stokes...", 20, 30);
                }
                 // UI Overlay for AI
                 if (mode === 'ai') {
                    ctx.fillStyle = '#f87171';
                    ctx.font = '14px JetBrains Mono';
                    ctx.fillText("WARNING: MOMENTUM DRIFT DETECTED", 20, 30);
                }
                 // UI Overlay for Ours
                 if (mode === 'ours') {
                    ctx.fillStyle = '#34d399';
                    ctx.font = '14px JetBrains Mono';
                    ctx.fillText("Physics Enforced: Stable & Fast", 20, 30);
                }

                frameCount.current++;
                requestRef.current = requestAnimationFrame(updateParticles);
            };

            useEffect(() => {
                requestRef.current = requestAnimationFrame(updateParticles);
                return () => cancelAnimationFrame(requestRef.current);
            }, [mode]);

            return <canvas ref={canvasRef} width={CANVAS_WIDTH} height={CANVAS_HEIGHT} className="w-full h-auto bg-slate-900 rounded-lg border border-slate-700 shadow-2xl" />;
        };

        // --- MAIN APP COMPONENT ---
        const App = () => {
            const [mode, setMode] = useState('traditional'); // 'traditional', 'ai', 'ours'

            const content = {
                traditional: {
                    title: "The Traditional Way (CFD)",
                    icon: <Clock className="w-6 h-6 text-blue-400" />,
                    desc: "Methods like SPH (Smoothed Particle Hydrodynamics) are incredibly accurate because they solve complex Navier-Stokes equations for every particle.",
                    pain: "BUT: It's excruciatingly slow. Engineers wait hours or days for high-fidelity results. Innovation halts while the loading bar crawls.",
                    stats: "Accuracy: 99% | Speed: 1%"
                },
                ai: {
                    title: "The 'Black Box' AI",
                    icon: <Zap className="w-6 h-6 text-red-400" />,
                    desc: "Standard Deep Learning (GNNs/PointNets) is fast. It learns patterns from data and predicts the next frame instantly.",
                    pain: "BUT: It doesn't know physics. Without 'Hard Constraints', errors accumulate. Momentum isn't conserved. The simulation 'explodes' or behaves like magic, not fluid.",
                    stats: "Accuracy: 40% (Long term) | Speed: 99%"
                },
                ours: {
                    title: "Our Solution: Physics-Preserved Learning",
                    icon: <ShieldCheck className="w-6 h-6 text-emerald-400" />,
                    desc: "We embed Newton's 3rd Law directly into the neural network architecture (Antisymmetric Continuous Convolutions).",
                    pain: "RESULT: The network can't break the laws of physics even if it tries. We get the speed of AI with the stability of CFD.",
                    stats: "Accuracy: 95% | Speed: 98%"
                }
            };

            return (
                <div className="min-h-screen pb-20">
                    
                    {/* Header */}
                    <header className="px-6 py-8 border-b border-slate-800 bg-slate-900/50 backdrop-blur sticky top-0 z-50">
                        <div className="max-w-4xl mx-auto flex justify-between items-center">
                            <div>
                                <h1 className="text-xl font-bold tracking-tight text-white">Research Journey</h1>
                                <p className="text-xs text-slate-400 font-mono">PART 1: THE SIMULATION PARADOX</p>
                            </div>
                            <div className="flex gap-4 text-sm font-medium">
                                <span className="text-slate-400">Week 1 of 52</span>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-4xl mx-auto px-6 mt-12">
                        
                        {/* Hero Section */}
                        <div className="text-center mb-16">
                            <h2 className="text-5xl font-extrabold text-white mb-6 leading-tight">
                                Why do we have to choose between <br />
                                <span className="gradient-text">Speed</span> and <span className="gradient-text">Truth</span>?
                            </h2>
                            <p className="text-xl text-slate-400 max-w-2xl mx-auto leading-relaxed">
                                In Fluid Dynamics, you usually get one or the other. This week, I'm sharing how we broke that rule.
                            </p>
                        </div>

                        {/* Interactive Demo Container */}
                        <div className="bg-slate-800/50 p-2 rounded-2xl border border-slate-700 glow mb-12">
                            <div className="flex flex-col md:flex-row gap-6 p-6">
                                
                                {/* Controls */}
                                <div className="w-full md:w-1/3 flex flex-col gap-3">
                                    <h3 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-2">Select Simulation Engine</h3>
                                    
                                    <button 
                                        onClick={() => setMode('traditional')}
                                        className={`p-4 rounded-xl text-left border transition-all duration-200 group ${mode === 'traditional' ? 'bg-blue-900/30 border-blue-500 shadow-lg' : 'bg-slate-800 border-slate-700 hover:border-slate-500'}`}
                                    >
                                        <div className="flex items-center justify-between mb-1">
                                            <span className={`font-bold ${mode === 'traditional' ? 'text-blue-400' : 'text-slate-300'}`}>Traditional CFD</span>
                                            <Clock size={18} className={mode === 'traditional' ? 'text-blue-400' : 'text-slate-500'} />
                                        </div>
                                        <div className="text-xs text-slate-400">High Accuracy, Extremely Slow</div>
                                    </button>

                                    <button 
                                        onClick={() => setMode('ai')}
                                        className={`p-4 rounded-xl text-left border transition-all duration-200 group ${mode === 'ai' ? 'bg-red-900/30 border-red-500 shadow-lg' : 'bg-slate-800 border-slate-700 hover:border-slate-500'}`}
                                    >
                                        <div className="flex items-center justify-between mb-1">
                                            <span className={`font-bold ${mode === 'ai' ? 'text-red-400' : 'text-slate-300'}`}>Standard AI</span>
                                            <Zap size={18} className={mode === 'ai' ? 'text-red-400' : 'text-slate-500'} />
                                        </div>
                                        <div className="text-xs text-slate-400">Fast, but Unstable Physics</div>
                                    </button>

                                    <button 
                                        onClick={() => setMode('ours')}
                                        className={`p-4 rounded-xl text-left border transition-all duration-200 group ${mode === 'ours' ? 'bg-emerald-900/30 border-emerald-500 shadow-lg' : 'bg-slate-800 border-slate-700 hover:border-slate-500'}`}
                                    >
                                        <div className="flex items-center justify-between mb-1">
                                            <span className={`font-bold ${mode === 'ours' ? 'text-emerald-400' : 'text-slate-300'}`}>My Research</span>
                                            <ShieldCheck size={18} className={mode === 'ours' ? 'text-emerald-400' : 'text-slate-500'} />
                                        </div>
                                        <div className="text-xs text-slate-400">Momentum Conserved & Fast</div>
                                    </button>
                                </div>

                                {/* Canvas Wrapper */}
                                <div className="w-full md:w-2/3 relative">
                                    <SimulationCanvas mode={mode} />
                                    <div className="mt-4 flex justify-between items-center text-xs font-mono text-slate-500">
                                        <span>Engine: {mode === 'traditional' ? 'Navier-Stokes (Simulated)' : (mode === 'ai' ? 'Basic GNN' : 'Momentum-Conserving CNN')}</span>
                                        <span>Status: {mode === 'traditional' ? 'CALCULATING...' : 'RUNNING'}</span>
                                    </div>
                                </div>
                            </div>

                            {/* Dynamic Explanation Box */}
                            <div className="border-t border-slate-700 bg-slate-900/80 p-6 rounded-b-xl">
                                <div className="flex items-start gap-4">
                                    <div className={`p-3 rounded-lg bg-opacity-20 ${mode === 'traditional' ? 'bg-blue-500' : (mode === 'ai' ? 'bg-red-500' : 'bg-emerald-500')}`}>
                                        {content[mode].icon}
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-bold text-white mb-2">{content[mode].title}</h3>
                                        <p className="text-slate-300 mb-3 leading-relaxed">{content[mode].desc}</p>
                                        <div className="bg-slate-950 p-3 rounded border-l-4 border-slate-600 mb-3">
                                            <p className="text-sm italic text-slate-400"><span className="font-bold text-white not-italic">The Catch: </span>{content[mode].pain}</p>
                                        </div>
                                        <p className="font-mono text-xs text-slate-500">{content[mode].stats}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Elaborative Text Sections */}
                        <div className="grid md:grid-cols-2 gap-12 mt-20">
                            <div>
                                <h3 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                                    <Database className="text-blue-500" />
                                    The Data Bottleneck
                                </h3>
                                <p className="text-slate-400 leading-relaxed mb-4">
                                    Traditional solvers like SPH are governed by the Navier-Stokes equations. They respect conservation laws inherently, but they require massive computational resources.
                                </p>
                                <p className="text-slate-400 leading-relaxed">
                                    In my research, I found that even simple simulations could take hours. This slows down the engineering design cycle significantly. We need to iterate faster.
                                </p>
                            </div>
                            <div>
                                <h3 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                                    <AlertTriangle className="text-red-500" />
                                    The AI Risk
                                </h3>
                                <p className="text-slate-400 leading-relaxed mb-4">
                                    Deep learning offers a 100x-1000x speedup. But standard networks treat physics as a "suggestion."
                                </p>
                                <p className="text-slate-400 leading-relaxed">
                                    As shown in the "Standard AI" demo above, without strict mathematical constraints, models hallucinate. Energy appears out of nowhere. Momentum drifts. This is useless for engineering.
                                </p>
                            </div>
                        </div>

                        {/* Teaser for the Week */}
                        <div className="mt-20 mb-20 bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-slate-700 p-8 rounded-2xl text-center">
                            <h3 className="text-2xl font-bold text-white mb-4">So, how do we fix it?</h3>
                            <p className="text-lg text-slate-300 max-w-2xl mx-auto mb-8">
                                The answer wasn't more data. It was better architecture. Specifically, embedding <span className="text-emerald-400 font-bold">Newton's 3rd Law</span> directly into the convolutional layers.
                            </p>
                            <a href="#" className="inline-flex items-center gap-2 bg-white text-slate-900 px-6 py-3 rounded-full font-bold hover:bg-slate-200 transition-colors">
                                Follow the breakdown this week <ArrowRight size={18} />
                            </a>
                        </div>

                    </main>

                    <footer className="border-t border-slate-800 mt-12 py-8 text-center text-slate-500 text-sm">
                        <p>Â© 2024 Research Series. Based on "Physics-Preserved Learning for Fluid Dynamics".</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>